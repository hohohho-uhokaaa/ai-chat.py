# ai-chat.py
Python AI chat gui app for linux generated by Google Gemini

Qwen2.5-Coder Desktop Chat
Qwen2.5-Coder (1.5B/7B) をローカル環境で動かすための、PyQt5ベースのデスクトップ・チャットアプリケーションです。

🚀 特徴
完全ローカル推論: 外部APIを一切使用せず、プライバシーを確保した状態でAIとの対話が可能です。
非同期（マルチスレッド）処理: モデルのロードや推論中もGUIがフリーズしない QThread 設計を採用しています。
高度なMarkdown表示: プログラムコードをシンタックスハイライト（色分け）付きで表示します。
モデル・ホットスワップ: アプリ実行中に 1.5B（軽量）と 7B（高性能）のモデルを動的に切り替え可能です。
スマート・キャッシュ管理: HF_HOME をプロジェクト内の .cache に固定し、Linux環境等での権限エラーを回避します。

🛠 セットアップ
1. 動作環境
OS: Linux (Fedora/Ubuntu等), Windows, macOS

Python: 3.10 以上 (Python 3.14 対応済)

GPU: CUDA対応GPU推奨

Memory: 16GB 以上

2. 依存ライブラリのインストール
Bash
pip install torch torchvision torchaudio
pip install transformers accelerate
pip install PyQt5 markdown pygments
💻 使い方
スクリプトを実行します。

Bash
python ai-chat.py
初回は Hugging Face からモデルデータが自動ダウンロードされます。

モデルのロード完了後、下部のプロンプト欄からエンジニアリングの質問やコード生成の依頼を行ってください。

📁 ディレクトリ構成
ai-chat.py: メインプログラム

.cache/: AIモデルキャッシュ（自動生成）

chat_history.txt: タイムスタンプ付き対話ログ（自動生成）

📄 ライセンス / Copyright
Copyright © 2026 Google Gemini.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

// Qwen2.5-coder が Apa2 ライセンスのため

💡 開発メモ（ユーザー用）
GUI レイアウト:
GUI レイアウトがまずすぎるのでコード全部を一旦 Gemini に放り込んでまともになるよう修正要

トラブルシューティング:
PermissionError が発生した場合は、.cache ディレクトリの所有権が正しいか、または実行ディレクトリがシェルの環境変数で変更されていないか確認してください。

エラー対応:
万が一、モデルダウンロード時に PermissionError が発生した場合は、ロックファイルの削除 find .cache -name "*.lock" -delete を試みてください。

<img width="893" height="876" alt="image" src="https://github.com/user-attachments/assets/f459df44-f89e-461a-8675-6e18687afc6a" />
$ /bin/python /home/datahogehogep/Projects/Sources/Python/ai-chat-frontend-gui-py/ai-chat.py
QSocketNotifier: Can only be used with threads started with QThread
Loading weights: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████| 338/338 [00:06<00:00, 54.32it/s, Materializing param=model.norm.weight]
Some parameters are on the meta device because they were offloaded to the disk and cpu.

(python:107829): Gtk-WARNING **: 03:56:16.086: Theme parsing error: <data>:1:0: Expected a valid selector
